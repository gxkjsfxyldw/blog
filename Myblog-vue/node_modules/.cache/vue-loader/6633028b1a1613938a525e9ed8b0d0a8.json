{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue","mtime":1662299411966},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662220387677},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport ScrollPage from \"@/components/downpage\"\r\nimport ArticleItem from \"@/components/article/ArticleItem\";\r\n\r\nexport default {\r\n  name: \"ArticleScrollPage\",\r\n  components:{\r\n    \"scroll-page\":ScrollPage, ArticleItem\r\n  },\r\n  data(){\r\n    return{\r\n      loading : false,//是否显示加载\r\n      noData : false,\r\n      offset : 0,\r\n      //测试数据 json\r\n      articles:[\r\n        {\r\n          id:\"1\",\r\n          weight:1,\r\n          title:\"标题1\",\r\n          commentCounts:123,\r\n          viewCounts:123,\r\n          summary:\"概要11\",\r\n          author:\"作者\",\r\n          tags:[{\"tagName\":\"vue\"}],\r\n          createDate:\"3333\"\r\n        },\r\n        {\r\n          id:\"2\",\r\n          weight:1,\r\n          title:\"标题2\",\r\n          commentCounts:123,\r\n          viewCounts:123,\r\n          summary:\"概要11\",\r\n          author:\"作者\",\r\n          tags:[{\"tagName\":\"vue\"}],\r\n          createDate:\"222\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted(){\r\n    //监听鼠标滚动事件\r\n    window.addEventListener('mousewheel',this.handleScroll);\r\n  },\r\n  methods:{\r\n    //监听鼠标滚动事件\r\n    handleScroll(e) {\r\n      if(e.deltaY<=0){\r\n        e.deltaY=0\r\n      }\r\n      this.offset=e.deltaY+this.offset\r\n      console.log(this.offset)\r\n      var count=this.offset/125;\r\n      console.log()\r\n      if (count%6==0) {\r\n        //调用load加载数据\r\n        this.load()\r\n      }\r\n    },\r\n    //后面再改进\r\n    load(){\r\n      //如果触发分页，需要调用接口，加载文章\r\n      alert(\"触发分页\");\r\n      this.getArticle();\r\n    },\r\n    getArticle(){\r\n      //获取后端接口请求文章列表数据\r\n      this.loading=true;//显示加载\r\n      this.axios.post(\"url\",\"params\").then((res)=>{\r\n        //Reult (success)\r\n        if(res.data.data.length<=0){\r\n          \r\n        }\r\n        if(res.data.success){\r\n          this.articles=this.articles.concat(res.data.data);\r\n        }else{\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      }).catch((err)=>{\r\n        this.$message.error(\"文章加载失败\");\r\n      }).finally(()=>{\r\n        this.loading=false;//数据加载完成后关闭加载\r\n      })\r\n    }\r\n  },\r\n\r\n}\r\n",{"version":3,"sources":["ArticleScrollPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ArticleScrollPage.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <scroll-page\r\n      :loading=\"loading\"\r\n      :offset=\"offset\"\r\n      :no-data=\"noData\"\r\n      @load=\"load\">\r\n\r\n    <ArticleItem\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        v-bind=\"article\">\r\n    </ArticleItem>\r\n  </scroll-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport ScrollPage from \"@/components/downpage\"\r\nimport ArticleItem from \"@/components/article/ArticleItem\";\r\n\r\nexport default {\r\n  name: \"ArticleScrollPage\",\r\n  components:{\r\n    \"scroll-page\":ScrollPage, ArticleItem\r\n  },\r\n  data(){\r\n    return{\r\n      loading : false,//是否显示加载\r\n      noData : false,\r\n      offset : 0,\r\n      //测试数据 json\r\n      articles:[\r\n        {\r\n          id:\"1\",\r\n          weight:1,\r\n          title:\"标题1\",\r\n          commentCounts:123,\r\n          viewCounts:123,\r\n          summary:\"概要11\",\r\n          author:\"作者\",\r\n          tags:[{\"tagName\":\"vue\"}],\r\n          createDate:\"3333\"\r\n        },\r\n        {\r\n          id:\"2\",\r\n          weight:1,\r\n          title:\"标题2\",\r\n          commentCounts:123,\r\n          viewCounts:123,\r\n          summary:\"概要11\",\r\n          author:\"作者\",\r\n          tags:[{\"tagName\":\"vue\"}],\r\n          createDate:\"222\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted(){\r\n    //监听鼠标滚动事件\r\n    window.addEventListener('mousewheel',this.handleScroll);\r\n  },\r\n  methods:{\r\n    //监听鼠标滚动事件\r\n    handleScroll(e) {\r\n      if(e.deltaY<=0){\r\n        e.deltaY=0\r\n      }\r\n      this.offset=e.deltaY+this.offset\r\n      console.log(this.offset)\r\n      var count=this.offset/125;\r\n      console.log()\r\n      if (count%6==0) {\r\n        //调用load加载数据\r\n        this.load()\r\n      }\r\n    },\r\n    //后面再改进\r\n    load(){\r\n      //如果触发分页，需要调用接口，加载文章\r\n      alert(\"触发分页\");\r\n      this.getArticle();\r\n    },\r\n    getArticle(){\r\n      //获取后端接口请求文章列表数据\r\n      this.loading=true;//显示加载\r\n      this.axios.post(\"url\",\"params\").then((res)=>{\r\n        //Reult (success)\r\n        if(res.data.data.length<=0){\r\n          \r\n        }\r\n        if(res.data.success){\r\n          this.articles=this.articles.concat(res.data.data);\r\n        }else{\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      }).catch((err)=>{\r\n        this.$message.error(\"文章加载失败\");\r\n      }).finally(()=>{\r\n        this.loading=false;//数据加载完成后关闭加载\r\n      })\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n\r\n}\r\n</style>\r\n"]}]}