{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\downpage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\downpage\\index.vue","mtime":1662288127980},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662220387677},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"index\",\r\n  props:{\r\n    loading:Boolean,//是否显示加载\r\n    noData:Boolean,\r\n    offset:Number\r\n  },\r\n  mounted() {\r\n  //  绑定事件监听，滚动时触发\r\n    window.addEventListener('scroll',this.handleScroll,false);\r\n  },\r\n  beforeDestroy() {\r\n  //  移除事件监听\r\n    window.removeEventListener('scroll',this.handleScroll);\r\n  },\r\n  data(){\r\n    return{\r\n      scrollAction:{\r\n        x:'undefined',\r\n        y:'undefined'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleScroll(e) {\r\n      var that = this\r\n      //\r\n      if (!that.noData) {\r\n        //如果有数据，触发\r\n        let curHeight = document.documentElement.scrollTop || document.body.scrollTop\r\n        //获取div区域\r\n        var scrollPage = document.getElementById('scroll-page');\r\n\r\n        if ((curHeight + window.innerHeight >= that.$refs.scroll.offsetHeight + that.offset) && that.isDownDirection()) {\r\n          //判断是否到达底部\r\n          if (!that.loading) {\r\n            //调用load加载数据\r\n            that.$emit('load')\r\n          }\r\n        }\r\n      }\r\n    },\r\n    isDownDirection(){\r\n      if(typeof this.scrollAction.x=='undefined'){\r\n        this.scrollAction.x =window.pageXOffset\r\n        this.scrollAction.y =window.pageYOffset\r\n      }\r\n      var diffx=this.scrollAction.x-window.pageXOffset\r\n      var diffy=this.scrollAction.y-window.pageYOffset\r\n\r\n      this.scrollAction.x =window.pageXOffset\r\n      this.scrollAction.y =window.pageYOffset\r\n\r\n      if (diffx < 0) {\r\n        // Scroll right\r\n      } else if (diffx > 0) {\r\n        // Scroll left\r\n      } else if (diffy < 0) {\r\n        // Scroll down\r\n        return true\r\n      } else if (diffy > 0) {\r\n        // Scroll up\r\n      } else {\r\n        // First scroll event\r\n      }\r\n      return false\r\n    }\r\n  }\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/downpage","sourcesContent":["<template>\r\n\r\n  <div ref=\"scroll\" id=\"scroll-page\" style=\"overflow: hidden\">\r\n    <slot></slot>\r\n    <!--loading动画，加载的数据的过程中显示 elementui load-->\r\n    <div\r\n        style=\"height: 40px;margin-top: 10px;z-index: 1\"\r\n        v-loading=\"loading\"\r\n        element-loading-text=\"拼命加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(245,245,245)\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"index\",\r\n  props:{\r\n    loading:Boolean,//是否显示加载\r\n    noData:Boolean,\r\n    offset:Number\r\n  },\r\n  mounted() {\r\n  //  绑定事件监听，滚动时触发\r\n    window.addEventListener('scroll',this.handleScroll,false);\r\n  },\r\n  beforeDestroy() {\r\n  //  移除事件监听\r\n    window.removeEventListener('scroll',this.handleScroll);\r\n  },\r\n  data(){\r\n    return{\r\n      scrollAction:{\r\n        x:'undefined',\r\n        y:'undefined'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleScroll(e) {\r\n      var that = this\r\n      //\r\n      if (!that.noData) {\r\n        //如果有数据，触发\r\n        let curHeight = document.documentElement.scrollTop || document.body.scrollTop\r\n        //获取div区域\r\n        var scrollPage = document.getElementById('scroll-page');\r\n\r\n        if ((curHeight + window.innerHeight >= that.$refs.scroll.offsetHeight + that.offset) && that.isDownDirection()) {\r\n          //判断是否到达底部\r\n          if (!that.loading) {\r\n            //调用load加载数据\r\n            that.$emit('load')\r\n          }\r\n        }\r\n      }\r\n    },\r\n    isDownDirection(){\r\n      if(typeof this.scrollAction.x=='undefined'){\r\n        this.scrollAction.x =window.pageXOffset\r\n        this.scrollAction.y =window.pageYOffset\r\n      }\r\n      var diffx=this.scrollAction.x-window.pageXOffset\r\n      var diffy=this.scrollAction.y-window.pageYOffset\r\n\r\n      this.scrollAction.x =window.pageXOffset\r\n      this.scrollAction.y =window.pageYOffset\r\n\r\n      if (diffx < 0) {\r\n        // Scroll right\r\n      } else if (diffx > 0) {\r\n        // Scroll left\r\n      } else if (diffy < 0) {\r\n        // Scroll down\r\n        return true\r\n      } else if (diffy > 0) {\r\n        // Scroll up\r\n      } else {\r\n        // First scroll event\r\n      }\r\n      return false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}