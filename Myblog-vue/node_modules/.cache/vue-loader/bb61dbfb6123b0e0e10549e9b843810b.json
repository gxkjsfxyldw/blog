{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue?vue&type=style&index=0&id=85102b44&scoped=true&lang=css&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue","mtime":1663146971564},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\css-loader\\index.js","mtime":1662220376868},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1662220386650},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1662220387513},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n\r\n}\r\n",{"version":3,"sources":["ArticleScrollPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;;AAEA;AACA;;AAEA","file":"ArticleScrollPage.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n  <scroll-page\r\n      :loading=\"loading\"\r\n      :offset=\"offset\"\r\n      :no-data=\"noData\"\r\n      @load=\"load\">\r\n<!--@load=\"load 不能使用静态数据测试-->\r\n    <ArticleItem\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        v-bind=\"article\">\r\n    </ArticleItem>\r\n  </scroll-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport ScrollPage from \"@/components/downpage\"\r\nimport ArticleItem from \"@/components/article/ArticleItem\";\r\nimport {getArticle} from \"@/api/article\";\r\n\r\nexport default {\r\n  name: \"ArticleScrollPage\",\r\n  components:{\r\n    \"scroll-page\":ScrollPage, ArticleItem\r\n  },\r\n  props:{\r\n    query:{\r\n      type: Object,\r\n      default(){\r\n        return {}\r\n      }\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      loading : false,//是否显示加载\r\n      noData : false,\r\n      offset : 0,\r\n      //测试数据 json\r\n      articles:[],\r\n      innerPage:{\r\n        page: 1,\r\n        pageSize:10,\r\n        tagId:null,\r\n        categoryId:null\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticle();\r\n  },\r\n  methods:{\r\n    load(){\r\n      //如果触发分页，需要调用接口，加载文章\r\n      alert(\"触发分页\");\r\n      this.getArticle();\r\n    },\r\n    getArticle(){\r\n      //获取后端接口请求文章列表数据\r\n      this.loading = true;\r\n      this.innerPage.tagId = this.query.tagId;\r\n      this.innerPage.categoryId = this.query.categoryId;\r\n      // this.axios.post(\"http://localhost:8888/articles\",this.innerPage).then((res)=>{\r\n      //使用工具类封装后不用上面的语句发送请求了\r\n        getArticle(this.innerPage).then((res)=>{\r\n        if(res.data.success){\r\n          //Reult (success)\r\n          if(res.data.data.length<=0){\r\n            this.noData=true;\r\n          }\r\n          this.articles=this.articles.concat(res.data.data);\r\n          this.innerPage.page+=1;\r\n        }else{\r\n          this.$message.error(res.data.msg);\r\n        }\r\n      }).catch((err)=>{\r\n        this.$message.error(\"文章加载失败\");\r\n      }).finally(()=>{\r\n        this.loading=false;//数据加载完成后关闭加载\r\n      })\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n\r\n}\r\n</style>\r\n"]}]}