{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue?vue&type=style&index=0&id=85102b44&scoped=true&lang=css&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue","mtime":1663347106814},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\css-loader\\index.js","mtime":1662220376868},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1662220386650},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1662220387513},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n}\r\n",{"version":3,"sources":["ArticleScrollPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;;AAEA;AACA;AACA","file":"ArticleScrollPage.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\r\n\r\n  <scroll-page\r\n      :loading=\"loading\"\r\n      :offset=\"offset\"\r\n      :no-data=\"noData\"\r\n      v-on:load=\"load\">\r\n<!--@load=\"load 不能使用静态数据测试-->\r\n    <Article-item\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        v-bind=\"article\">\r\n    </Article-item>\r\n  </scroll-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport ScrollPage from \"@/components/downpage\"\r\nimport ArticleItem from \"@/components/article/ArticleItem\";\r\nimport {getArticle} from \"@/api/article\";\r\n\r\nexport default {\r\n  name: \"ArticleScrollPage\",\r\n  components:{\r\n    \"scroll-page\":ScrollPage,\r\n    \"Article-item\":ArticleItem\r\n  },\r\n  props:{\r\n    query:{\r\n      type: Object,\r\n      default(){\r\n        return {}\r\n      }\r\n    },\r\n    offset: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    page: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n  },\r\n  data(){\r\n    return{\r\n      loading : false,//是否显示加载\r\n      noData : false,\r\n      articles:[],\r\n      innerPage:{\r\n        pageNumber: 1,\r\n        page: 1,\r\n        pageSize:10,\r\n        tagId:null,\r\n        categoryId:null\r\n      },\r\n    }\r\n  },\r\n  watch: {\r\n    'query': {\r\n      handler() {\r\n        this.noData = false\r\n        this.articles = []\r\n        this.innerPage.pageNumber = 1\r\n        this.getArticle()\r\n      },\r\n      deep: true\r\n    },\r\n    'page': {\r\n      handler() {\r\n        this.noData = false\r\n        this.articles = []\r\n        this.innerPage = this.page\r\n        this.getArticle()\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticle();\r\n  },\r\n  methods:{\r\n    view(id) {\r\n      this.$router.push({path: `/view/${id}`})\r\n    },\r\n    load(){\r\n      //如果触发分页，需要调用接口，加载文章\r\n      // alert(\"触发分页\");\r\n      this.getArticle();\r\n    },\r\n    getArticle(){\r\n      let that = this\r\n      //获取后端接口请求文章列表数据\r\n      that.loading = true\r\n      // this.axios.post(\"http://localhost:8888/articles\",this.innerPage).then((res)=>{\r\n      //使用工具类封装后不用上面的语句发送请求了\r\n        getArticle(that.query, that.innerPage).then(res => {\r\n          let newArticles = res.data.data\r\n          if (newArticles && newArticles.length > 0) {\r\n            that.innerPage.pageNumber += 1\r\n            that.articles = that.articles.concat(newArticles)\r\n          } else {\r\n            that.noData = true\r\n          }\r\n      }).catch((error)=>{\r\n          if (error !== 'error') {\r\n            that.$message({type: 'error', message: '文章加载失败!', showClose: true})\r\n          }\r\n      }).finally(()=>{\r\n          that.loading=false;//数据加载完成后关闭加载\r\n      })\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"]}]}