{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\common\\ArticleScrollPage.vue","mtime":1663347106814},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1662220379588},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662220387677},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ScrollPage from \"@/components/downpage\";\nimport ArticleItem from \"@/components/article/ArticleItem\";\nimport { getArticle as _getArticle } from \"@/api/article\";\nexport default {\n  name: \"ArticleScrollPage\",\n  components: {\n    \"scroll-page\": ScrollPage,\n    \"Article-item\": ArticleItem\n  },\n  props: {\n    query: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    offset: {\n      type: Number,\n      default: 100\n    },\n    page: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      //是否显示加载\n      noData: false,\n      articles: [],\n      innerPage: {\n        pageNumber: 1,\n        page: 1,\n        pageSize: 10,\n        tagId: null,\n        categoryId: null\n      }\n    };\n  },\n  watch: {\n    'query': {\n      handler: function handler() {\n        this.noData = false;\n        this.articles = [];\n        this.innerPage.pageNumber = 1;\n        this.getArticle();\n      },\n      deep: true\n    },\n    'page': {\n      handler: function handler() {\n        this.noData = false;\n        this.articles = [];\n        this.innerPage = this.page;\n        this.getArticle();\n      },\n      deep: true\n    }\n  },\n  created: function created() {\n    this.getArticle();\n  },\n  methods: {\n    view: function view(id) {\n      this.$router.push({\n        path: \"/view/\".concat(id)\n      });\n    },\n    load: function load() {\n      //如果触发分页，需要调用接口，加载文章\n      // alert(\"触发分页\");\n      this.getArticle();\n    },\n    getArticle: function getArticle() {\n      var that = this; //获取后端接口请求文章列表数据\n\n      that.loading = true; // this.axios.post(\"http://localhost:8888/articles\",this.innerPage).then((res)=>{\n      //使用工具类封装后不用上面的语句发送请求了\n\n      _getArticle(that.query, that.innerPage).then(function (res) {\n        var newArticles = res.data.data;\n\n        if (newArticles && newArticles.length > 0) {\n          that.innerPage.pageNumber += 1;\n          that.articles = that.articles.concat(newArticles);\n        } else {\n          that.noData = true;\n        }\n      }).catch(function (error) {\n        if (error !== 'error') {\n          that.$message({\n            type: 'error',\n            message: '文章加载失败!',\n            showClose: true\n          });\n        }\n      }).finally(function () {\n        that.loading = false; //数据加载完成后关闭加载\n      });\n    }\n  }\n};",{"version":3,"sources":["ArticleScrollPage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\r\n  <scroll-page\r\n      :loading=\"loading\"\r\n      :offset=\"offset\"\r\n      :no-data=\"noData\"\r\n      v-on:load=\"load\">\r\n<!--@load=\"load 不能使用静态数据测试-->\r\n    <Article-item\r\n        v-for=\"article in articles\"\r\n        :key=\"article.id\"\r\n        v-bind=\"article\">\r\n    </Article-item>\r\n  </scroll-page>\r\n</template>\r\n\r\n\r\n<script>\r\nimport ScrollPage from \"@/components/downpage\"\r\nimport ArticleItem from \"@/components/article/ArticleItem\";\r\nimport {getArticle} from \"@/api/article\";\r\n\r\nexport default {\r\n  name: \"ArticleScrollPage\",\r\n  components:{\r\n    \"scroll-page\":ScrollPage,\r\n    \"Article-item\":ArticleItem\r\n  },\r\n  props:{\r\n    query:{\r\n      type: Object,\r\n      default(){\r\n        return {}\r\n      }\r\n    },\r\n    offset: {\r\n      type: Number,\r\n      default: 100\r\n    },\r\n    page: {\r\n      type: Object,\r\n      default() {\r\n        return {}\r\n      }\r\n    },\r\n  },\r\n  data(){\r\n    return{\r\n      loading : false,//是否显示加载\r\n      noData : false,\r\n      articles:[],\r\n      innerPage:{\r\n        pageNumber: 1,\r\n        page: 1,\r\n        pageSize:10,\r\n        tagId:null,\r\n        categoryId:null\r\n      },\r\n    }\r\n  },\r\n  watch: {\r\n    'query': {\r\n      handler() {\r\n        this.noData = false\r\n        this.articles = []\r\n        this.innerPage.pageNumber = 1\r\n        this.getArticle()\r\n      },\r\n      deep: true\r\n    },\r\n    'page': {\r\n      handler() {\r\n        this.noData = false\r\n        this.articles = []\r\n        this.innerPage = this.page\r\n        this.getArticle()\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticle();\r\n  },\r\n  methods:{\r\n    view(id) {\r\n      this.$router.push({path: `/view/${id}`})\r\n    },\r\n    load(){\r\n      //如果触发分页，需要调用接口，加载文章\r\n      // alert(\"触发分页\");\r\n      this.getArticle();\r\n    },\r\n    getArticle(){\r\n      let that = this\r\n      //获取后端接口请求文章列表数据\r\n      that.loading = true\r\n      // this.axios.post(\"http://localhost:8888/articles\",this.innerPage).then((res)=>{\r\n      //使用工具类封装后不用上面的语句发送请求了\r\n        getArticle(that.query, that.innerPage).then(res => {\r\n          let newArticles = res.data.data\r\n          if (newArticles && newArticles.length > 0) {\r\n            that.innerPage.pageNumber += 1\r\n            that.articles = that.articles.concat(newArticles)\r\n          } else {\r\n            that.noData = true\r\n          }\r\n      }).catch((error)=>{\r\n          if (error !== 'error') {\r\n            that.$message({type: 'error', message: '文章加载失败!', showClose: true})\r\n          }\r\n      }).finally(()=>{\r\n          that.loading=false;//数据加载完成后关闭加载\r\n      })\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-card {\r\n  border-radius: 0;\r\n}\r\n\r\n.el-card:not(:first-child) {\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/common"}]}