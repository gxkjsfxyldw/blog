{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\downpage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\downpage\\index.vue","mtime":1662296615233},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662220387677},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    loading: Boolean,\n    noData: Boolean,\n    offset: Number\n  },\n  name: \"index\",\n  mounted: function mounted() {\n    //绑定事件监听，滚动的时候触发\n    window.addEventListener('scroll', this.handleScroll, false);\n  },\n  beforeDestroy: function beforeDestroy() {\n    //移出事件监听\n    window.removeEventListener('scroll', this.handleScroll);\n  },\n  data: function data() {\n    return {\n      scrollAction: {\n        x: 'undefined',\n        y: 'undefined'\n      }\n    };\n  },\n  methods: {\n    handleScroll: function handleScroll(e) {\n      var that = this; //\n\n      if (!that.noData) {\n        //如果有数据，触发\n        var curHeight = document.documentElement.scrollTop || document.body.scrollTop; //获取div区域\n\n        var scrollPage = document.getElementById('scroll-page');\n\n        if (curHeight + window.innerHeight >= that.$refs.scroll.offsetHeight + that.offset && that.isDownDirection()) {\n          //判断是否到达底部\n          if (!that.loading) {\n            //调用load加载数据\n            that.$emit('load');\n          }\n        }\n      }\n    },\n    isDownDirection: function isDownDirection() {\n      if (typeof this.scrollAction.x == 'undefined') {\n        this.scrollAction.x = window.pageXOffset;\n        this.scrollAction.y = window.pageYOffset;\n      }\n\n      var diffX = this.scrollAction.x - window.pageXOffset;\n      var diffY = this.scrollAction.y - window.pageYOffset;\n      this.scrollAction.x = window.pageXOffset;\n      this.scrollAction.y = window.pageYOffset;\n\n      if (diffX < 0) {// Scroll right\n      } else if (diffX > 0) {// Scroll left\n      } else if (diffY < 0) {\n        // Scroll down\n        return true;\n      } else if (diffY > 0) {// Scroll up\n      } else {// First scroll event\n        }\n\n      return false;\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA,OADA;AAEA,IAAA,MAAA,EAAA,OAFA;AAGA,IAAA,MAAA,EAAA;AAHA,GADA;AAOA,EAAA,IAAA,EAAA,OAPA;AAQA,EAAA,OARA,qBAQA;AACA;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,YAAA,EAAA,KAAA;AACA,GAXA;AAYA,EAAA,aAZA,2BAYA;AACA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,KAAA,YAAA;AACA,GAfA;AAgBA,EAAA,IAhBA,kBAgBA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AACA,QAAA,CAAA,EAAA,WADA;AAEA,QAAA,CAAA,EAAA;AAFA;AADA,KAAA;AAMA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,CADA,EACA;AACA,UAAA,IAAA,GAAA,IAAA,CADA,CAEA;;AACA,UAAA,CAAA,IAAA,CAAA,MAAA,EAAA;AACA;AACA,YAAA,SAAA,GAAA,QAAA,CAAA,eAAA,CAAA,SAAA,IAAA,QAAA,CAAA,IAAA,CAAA,SAAA,CAFA,CAGA;;AACA,YAAA,UAAA,GAAA,QAAA,CAAA,cAAA,CAAA,aAAA,CAAA;;AAEA,YAAA,SAAA,GAAA,MAAA,CAAA,WAAA,IAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,GAAA,IAAA,CAAA,MAAA,IAAA,IAAA,CAAA,eAAA,EAAA,EAAA;AACA;AACA,cAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA;AACA,YAAA,IAAA,CAAA,KAAA,CAAA,MAAA;AACA;AACA;AACA;AACA,KAlBA;AAmBA,IAAA,eAnBA,6BAmBA;AACA,UAAA,OAAA,KAAA,YAAA,CAAA,CAAA,IAAA,WAAA,EAAA;AACA,aAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;AACA,aAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;AACA;;AACA,UAAA,KAAA,GAAA,KAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;AACA,UAAA,KAAA,GAAA,KAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;AAEA,WAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;AACA,WAAA,YAAA,CAAA,CAAA,GAAA,MAAA,CAAA,WAAA;;AAEA,UAAA,KAAA,GAAA,CAAA,EAAA,CACA;AACA,OAFA,MAEA,IAAA,KAAA,GAAA,CAAA,EAAA,CACA;AACA,OAFA,MAEA,IAAA,KAAA,GAAA,CAAA,EAAA;AACA;AACA,eAAA,IAAA;AACA,OAHA,MAGA,IAAA,KAAA,GAAA,CAAA,EAAA,CACA;AACA,OAFA,MAEA,CACA;AACA;;AACA,aAAA,KAAA;AACA;AA3CA;AAxBA,CAAA","sourcesContent":["<template>\r\n\r\n  <div ref=\"scroll\" id=\"scroll-page\" style=\"overflow: hidden\">\r\n    <slot></slot>\r\n    <!--loading动画，加载的数据的过程中显示 elementui load-->\r\n    <div\r\n        style=\"height: 40px;margin-top: 10px;z-index: 1\"\r\n        v-loading=\"loading\"\r\n        element-loading-text=\"拼命加载中\"\r\n        element-loading-spinner=\"el-icon-loading\"\r\n        element-loading-background=\"rgba(245,245,245)\"></div>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    loading: Boolean,\r\n    noData: Boolean,\r\n    offset: Number\r\n\r\n  },\r\n  name: \"index\",\r\n  mounted() {\r\n    //绑定事件监听，滚动的时候触发\r\n    window.addEventListener('scroll', this.handleScroll, false);\r\n  },\r\n  beforeDestroy() {\r\n    //移出事件监听\r\n    window.removeEventListener('scroll', this.handleScroll)\r\n  },\r\n  data() {\r\n    return {\r\n      scrollAction: {\r\n        x: 'undefined',\r\n        y: 'undefined'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleScroll(e) {\r\n      var that = this\r\n      //\r\n      if (!that.noData) {\r\n        //如果有数据，触发\r\n        let curHeight = document.documentElement.scrollTop || document.body.scrollTop\r\n        //获取div区域\r\n        var scrollPage = document.getElementById('scroll-page');\r\n\r\n        if ((curHeight + window.innerHeight >= that.$refs.scroll.offsetHeight + that.offset) && that.isDownDirection()) {\r\n          //判断是否到达底部\r\n          if (!that.loading) {\r\n            //调用load加载数据\r\n            that.$emit('load')\r\n          }\r\n        }\r\n      }\r\n    },\r\n    isDownDirection() {\r\n      if (typeof this.scrollAction.x == 'undefined') {\r\n        this.scrollAction.x = window.pageXOffset;\r\n        this.scrollAction.y = window.pageYOffset;\r\n      }\r\n      var diffX = this.scrollAction.x - window.pageXOffset;\r\n      var diffY = this.scrollAction.y - window.pageYOffset;\r\n\r\n      this.scrollAction.x = window.pageXOffset;\r\n      this.scrollAction.y = window.pageYOffset;\r\n\r\n      if (diffX < 0) {\r\n        // Scroll right\r\n      } else if (diffX > 0) {\r\n        // Scroll left\r\n      } else if (diffY < 0) {\r\n        // Scroll down\r\n        return true\r\n      } else if (diffY > 0) {\r\n        // Scroll up\r\n      } else {\r\n        // First scroll event\r\n      }\r\n      return false\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":"src/components/downpage"}]}