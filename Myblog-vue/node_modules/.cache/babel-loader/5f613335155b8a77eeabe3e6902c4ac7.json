{"remainingRequest":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyBlog\\Myblog-vue\\src\\components\\comment\\CommentItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyBlog\\Myblog-vue\\src\\components\\comment\\CommentItem.vue","mtime":1663302008839},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1662220387677},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1662220380556},{"path":"D:\\MyBlog\\Myblog-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":1662220386645}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getCommentsByArticle, publishComment as _publishComment } from \"@/api/comment\";\nexport default {\n  name: \"CommentItem\",\n  props: {\n    articleId: String,\n    comment: Object,\n    index: Number,\n    rootCommentCounts: Number\n  },\n  data: function data() {\n    return {\n      placeholder: \"你的评论...\",\n      commentShow: false,\n      //是否显示评论输入框\n      commentShowIndex: '',\n      reply: this.getEmptyReply()\n    };\n  },\n  methods: {\n    showComment: function showComment(commentShowIndex, toUser) {\n      this.reply = this.getEmptyReply();\n\n      if (this.commentShowIndex != commentShowIndex) {\n        if (toUser) {\n          this.placeholder = \"@\".concat(toUser.nickname);\n          this.reply.toUserId = toUser.id;\n        } else {\n          this.placeholder = \"你的评论...\";\n        }\n\n        this.commentShow = true;\n        this.commentShowIndex = commentShowIndex;\n      } else {\n        this.commentShow = false;\n        this.commentShowIndex = '';\n      }\n    },\n    publishComment: function publishComment() {\n      var that = this;\n\n      if (!that.reply.content) {\n        return;\n      } //  二级评论\n\n\n      _publishComment(that.reply, this.$store.state.token).then(function (res) {\n        if (res.data.success) {\n          if (!that.comment.childrens) {\n            that.comment.childrens = [];\n          }\n\n          that.$message({\n            type: 'success',\n            message: '回复评论成功',\n            showClose: true\n          });\n          that.comment.childrens.unshift(res.data.data);\n        } else {\n          that.$message({\n            type: 'error',\n            message: '回复评论失败',\n            showClose: true\n          });\n        }\n      }).catch(function (error) {\n        if (error !== 'error') {\n          that.$message({\n            type: \"error\",\n            message: data.msg,\n            showClose: true\n          });\n        }\n      });\n    },\n    getEmptyReply: function getEmptyReply() {\n      return {\n        articleId: this.articleId,\n        parent: this.comment.id,\n        toUserId: '',\n        content: ''\n      };\n    }\n  }\n};",{"version":3,"sources":["CommentItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,SAAA,oBAAA,EAAA,cAAA,IAAA,eAAA,QAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA,MADA;AAEA,IAAA,OAAA,EAAA,MAFA;AAGA,IAAA,KAAA,EAAA,MAHA;AAIA,IAAA,iBAAA,EAAA;AAJA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,SADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAEA;AACA,MAAA,gBAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,KAAA,aAAA;AAJA,KAAA;AAMA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,gBADA,EACA,MADA,EACA;AACA,WAAA,KAAA,GAAA,KAAA,aAAA,EAAA;;AACA,UAAA,KAAA,gBAAA,IAAA,gBAAA,EAAA;AACA,YAAA,MAAA,EAAA;AACA,eAAA,WAAA,cAAA,MAAA,CAAA,QAAA;AACA,eAAA,KAAA,CAAA,QAAA,GAAA,MAAA,CAAA,EAAA;AACA,SAHA,MAGA;AACA,eAAA,WAAA,GAAA,SAAA;AACA;;AACA,aAAA,WAAA,GAAA,IAAA;AACA,aAAA,gBAAA,GAAA,gBAAA;AACA,OATA,MASA;AACA,aAAA,WAAA,GAAA,KAAA;AACA,aAAA,gBAAA,GAAA,EAAA;AACA;AACA,KAhBA;AAiBA,IAAA,cAjBA,4BAiBA;AACA,UAAA,IAAA,GAAA,IAAA;;AACA,UAAA,CAAA,IAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA;AACA,OAJA,CAKA;;;AACA,MAAA,eAAA,CAAA,IAAA,CAAA,KAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,cAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,EAAA;AACA,YAAA,IAAA,CAAA,OAAA,CAAA,SAAA,GAAA,EAAA;AACA;;AACA,UAAA,IAAA,CAAA,QAAA,CAAA;AAAA,YAAA,IAAA,EAAA,SAAA;AAAA,YAAA,OAAA,EAAA,QAAA;AAAA,YAAA,SAAA,EAAA;AAAA,WAAA;AACA,UAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,SANA,MAMA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA;AAAA,YAAA,IAAA,EAAA,OAAA;AAAA,YAAA,OAAA,EAAA,QAAA;AAAA,YAAA,SAAA,EAAA;AAAA,WAAA;AACA;AACA,OAVA,EAUA,KAVA,CAUA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,KAAA,OAAA,EAAA;AACA,UAAA,IAAA,CAAA,QAAA,CAAA;AAAA,YAAA,IAAA,EAAA,OAAA;AAAA,YAAA,OAAA,EAAA,IAAA,CAAA,GAAA;AAAA,YAAA,SAAA,EAAA;AAAA,WAAA;AACA;AACA,OAdA;AAeA,KAtCA;AAuCA,IAAA,aAvCA,2BAuCA;AACA,aAAA;AACA,QAAA,SAAA,EAAA,KAAA,SADA;AAEA,QAAA,MAAA,EAAA,KAAA,OAAA,CAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA;AAJA,OAAA;AAMA;AA9CA;AAhBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"me-view-comment-item\">\r\n    <div class=\"me-view-comment-author\">\r\n      <a class=\"\">\r\n        <img class=\"me-view-picture\" :src=\"comment.author.avatar\"/>\r\n      </a>\r\n      <div class=\"me-view-info\">\r\n        <span class=\"me-view-nickname\">{{comment.author.nickname}}</span>\r\n        <div class=\"me-view-meta\">\r\n          <span>{{rootCommentCounts - index}}楼</span>\r\n          <span>{{comment.createDate | format}}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <p class=\"me-view-comment-content\">{{comment.content}}</p>\r\n      <div class=\"me-view-comment-tools\">\r\n        <a class=\"me-view-comment-tool\" @click=\"showComment(-1,comment.author)\">\r\n          <i class=\"me-icon-comment\">&nbsp;评论</i>\r\n        </a>\r\n      </div>\r\n      <div class=\"me-reply-list\">\r\n        <div class=\"me-reply-item\" v-for=\"c in comment.childrens\" :key=\"c.id\">\r\n          <div style=\"font-size: 14px\">\r\n            <span class=\"me-reply-user\">{{c.author.nickname}}:&nbsp;&nbsp;</span>\r\n<!--            二级评论-->\r\n            <span v-if=\"c.level == 2\" class=\"me-reply-user\">@{{c.toUser.nickname}}:&nbsp;</span>\r\n\r\n            <span>{{c.content}}</span>\r\n          </div>\r\n          <div class=\"me-view-meta\">\r\n              <span style=\"padding-right: 10px;\">{{c.createDate | format}}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"me-view-comment-write\" v-show=\"commentShow\">\r\n          <el-input\r\n           v-model=\"reply.content\"\r\n           type=\"input\"\r\n          style=\"width: 90%\"\r\n          :placeholder=\"placeholder\"\r\n          class=\"me-view-comment-text\"\r\n          resize=\"none\">\r\n          </el-input>\r\n          <el-button style=\"margin-left: 8px\" @click=\"publishComment()\" type=\"text\">评论</el-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getCommentsByArticle, publishComment} from \"@/api/comment\";\r\nexport default {\r\n  name: \"CommentItem\",\r\n  props:{\r\n    articleId:String,\r\n    comment:Object,\r\n    index:Number,\r\n    rootCommentCounts:Number,\r\n  },\r\n  data(){\r\n    return {\r\n      placeholder:\"你的评论...\",\r\n      commentShow:false, //是否显示评论输入框\r\n      commentShowIndex:'',\r\n      reply:this.getEmptyReply()\r\n    }\r\n  },\r\n  methods:{\r\n    showComment(commentShowIndex,toUser){\r\n      this.reply=this.getEmptyReply()\r\n      if(this.commentShowIndex!=commentShowIndex){\r\n        if(toUser){\r\n          this.placeholder=`@${toUser.nickname}`\r\n          this.reply.toUserId=toUser.id\r\n        }else{\r\n          this.placeholder=\"你的评论...\"\r\n        }\r\n        this.commentShow=true\r\n        this.commentShowIndex=commentShowIndex\r\n      }else{\r\n        this.commentShow=false\r\n        this.commentShowIndex=''\r\n      }\r\n    },\r\n    publishComment(){\r\n      let that=this\r\n      if(!that.reply.content){\r\n        return;\r\n      }\r\n    //  二级评论\r\n      publishComment(that.reply,this.$store.state.token).then(res=>{\r\n        if(res.data.success){\r\n          if(!that.comment.childrens){\r\n            that.comment.childrens=[]\r\n          }\r\n          that.$message({type:'success',message:'回复评论成功',showClose:true})\r\n          that.comment.childrens.unshift(res.data.data)\r\n        }else{\r\n          that.$message({type:'error',message:'回复评论失败',showClose:true})\r\n        }\r\n      }).catch(error=>{\r\n        if(error!=='error'){\r\n          that.$message({type:\"error\",message:data.msg,showClose:true})\r\n        }\r\n      })\r\n    },\r\n    getEmptyReply(){\r\n      return{\r\n        articleId:this.articleId,\r\n        parent:this.comment.id,\r\n        toUserId:'',\r\n        content:''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.me-view-tag-item {\r\n  margin: 0 4px;\r\n}\r\n\r\n.me-view-comment {\r\n  margin-top: 60px;\r\n}\r\n\r\n.me-view-comment-title {\r\n  font-weight: 600;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n.me-view-comment-write {\r\n  margin-top: 20px;\r\n}\r\n\r\n.me-view-comment-text {\r\n  font-size: 16px;\r\n}\r\n\r\n.v-show-content {\r\n  padding: 8px 25px 15px 30px !important;\r\n}\r\n\r\n.v-note-wrapper .v-note-panel {\r\n  box-shadow: none !important;\r\n}\r\n\r\n.me-view-comment-item {\r\n  margin-top: 20px;\r\n  padding-bottom: 16px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.me-view-comment-author {\r\n  margin: 10px 0;\r\n  vertical-align: middle;\r\n}\r\n\r\n.me-view-nickname {\r\n  font-size: 14px;\r\n}\r\n\r\n.me-view-comment-content {\r\n  line-height: 1.5;\r\n}\r\n\r\n.me-view-comment-tools {\r\n  margin-top: 4px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.me-view-comment-tool {\r\n  font-size: 13px;\r\n  color: #a6a6a6;\r\n  padding-right: 14px;\r\n}\r\n\r\n.v-note-wrapper .v-note-panel .v-note-show .v-show-content, .v-note-wrapper .v-note-panel .v-note-show .v-show-content-html {\r\n  background: #fff !important;\r\n}\r\n\r\n.me-reply-list {\r\n  padding-left: 16px;\r\n  border-left: 4px solid #c5cac3;\r\n}\r\n\r\n.me-reply-item {\r\n  margin-bottom: 8px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.me-reply-user {\r\n  color: #78b6f7;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/comment"}]}